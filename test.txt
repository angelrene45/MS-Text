#!/bin/ksh

# Inicializar variables para los parámetros
MODE=""
ACCT=""
APPNAME=""
ROLE=""
DBNAME=""
SCHEMA=""

# Procesar los argumentos
for arg in "$@"
do
  case $arg in
    --mode=read)
      MODE="read"
      shift
      ;;
    --mode=readwrite)
      MODE="readwrite"
      shift
      ;;
    --acct=*)
      ACCT="${arg#*=}"
      shift
      ;;
    --appname=*)
      APPNAME="${arg#*=}"
      shift
      ;;
    --role=*)
      ROLE="${arg#*=}"
      shift
      ;;
    --dbname=*)
      DBNAME="${arg#*=}"
      shift
      ;;
    --schema=*)
      SCHEMA="${arg#*=}"
      shift
      ;;
    *)
      echo "Error: Opción no válida."
      echo "Uso: $0 --mode=[read|readwrite] --acct=<value> --appname=<value> --role=<value> --dbname=<value> --schema=<value>"
      exit 1
      ;;
  esac
done

# Verificar si el parámetro mode se estableció
if [ -z "$MODE" ]; then
  echo "Error: No se especificó el modo."
  echo "Uso: $0 --mode=[read|readwrite] --acct=<value> --appname=<value> --role=<value> --dbname=<value> --schema=<value>"
  exit 1
fi

# Mostrar los parámetros proporcionados
echo "Modo seleccionado: $MODE"
echo "Cuenta: $ACCT"
echo "Nombre de la aplicación: $APPNAME"
echo "Rol: $ROLE"
echo "Base de datos: $DBNAME"
echo "Esquema: $SCHEMA"

# Actuar según el modo
if [ "$MODE" = "read" ]; then
  echo "Ejecutando en modo de solo lectura..."
  # Aquí puedes agregar las acciones específicas para solo lectura
elif [ "$MODE" = "readwrite" ]; then
  echo "Ejecutando en modo de lectura y escritura..."
  # Aquí puedes agregar las acciones específicas para lectura y escritura
else
  echo "Error: Modo no válido."
  exit 1
fi

# Opcionalmente, puedes verificar si otros parámetros importantes están vacíos
if [ -z "$ACCT" ] || [ -z "$APPNAME" ] || [ -z "$ROLE" ] || [ -z "$DBNAME" ] || [ -z "$SCHEMA" ]; then
  echo "Advertencia: No se proporcionaron todos los parámetros opcionales."
fi
